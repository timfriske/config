#!/usr/bin/env bash

# Fuzzy-find Git Tags
# ===================
# Tim Friske <me@tifr.de>
#
# Program to let the user list _Git_ tags, fuzzy-find, pick and perform
# actions on those s/he is interested in.

shopt -os nounset pipefail errexit errtrace

function fzf_git_tag {
  local tag_options=()
  tag_options+=('--list')
  tag_options+=('--format=%(refname:short)')
  tag_options+=('--sort=version:refname')
  tag_options+=(${tag_opts:-})

  local fzf_keys=()
  fzf_keys+=('alt-c:execute(git checkout {})+abort')
  fzf_keys+=('alt-d:execute(git tag --delete {+})+abort')
  fzf_keys+=('alt-f:execute(git tag --delete --force {+})+abort')

  local fzf_options=()
  fzf_options+=(${FZF_DEFAULT_OPTS:-})
  fzf_options+=(${FZF_GIT_TAG_FZF_OPTS:-})
  fzf_options+=(${fzf_opts:-})
}

fzf_git_tag "$@"
