#!/usr/bin/env sh

# Simple file type detection
# ==========================
# Tim Friske <me@tifr.de>
#
# Simple utility program to detect the type of a file.  Detects the
# types of any given number of files.  If a given file does not exist it
# is searched in the directories listed in the `PATH` environment
# variable and the first match is returned if any.
#
# Think about aliasing this helper program as e.g. `ft` (`file-type`)
# should you be using it frequently.
#
# Deps:: env, file, sh

set -o errexit -o nounset

main() {
  if [ "${#}" = 0 ]; then
    echo 'usage: file-type <file (on path)>+'
  fi
  local file
  for file in "${@}"; do
    if [ -e "${file}" ]; then
      file -- "${file}"
    else
      file="$(command -v "${file}")"
      if [ -n "${file:+x}" ]; then
        file -- "${file}"
      fi
    fi
  done
}

main "${@}"
